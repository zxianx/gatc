# 项目简介

充分利用废弃google cloud账户， 将废弃账号收集， 获取请求gemini api的 token  
利用golang gin server ， cloud cli，自动化这个流程，  
项目部署方式为容器， 需要打包server 和 cloud cli ，  


# 资源
+ ubuntu 服务器 38.129.137.18 ，  user1 用户 , 有docker 环境， 
+ 1个稳定google云账户  resource/sa-key0.json ， 有绑卡 （下称为白号），费用充足。
+ db见配置


# 虚拟机管理service
## 机器信息需要同时写到db保存
需要新建表，程序启动时检查并创建， 机器信息只增不删（软删除）

## 创建
创建带1个有 socket5 代理  和 gcloud cli 环境的虚拟机， 最小规格。 （如何创建vm时初始化这些内容）  
返回机器ip等信息，程序登陆方式，代理地址  

## 删除





# gcloud账号管理 service

## 开号
半自动化的根据一个邮箱账号（已经绑定过信用卡的，下称为料号）产出能访问 gcloud 大模型的 api 的token

（有个参考流程见 gcp3999-2.sh 需求不完全一样）

流程
1.  用白号cli创建虚拟机， 在虚拟机上完成下面流程， 若流程失败则删除虚拟机
2.  登陆gcloud auth login， 这个整个过程需要再1个交互式 gcloud auth login，命令完成
    1.  虚拟机上执行 gcloud auth login --no-launch-browser  拿到用于获取key的浏览器登陆url 返回用户，
    2.  等待用户人工操作获取key，人工提交key， 写给  gcloud auth login 命令
    3.  完成登陆
    4.  可能需要1个交互前端页面工具给人工用，但是第一版先不搞，简单实现， 可以返回用户URl 附带回调url 说明， 比如
    {"login_url":"", "callBackUrl":"指向本服务的url?reqId=能表示这个请求的key&key={填写用户登陆拿到的key}"}
3. 创建/补充项目， 直到达到最大项目数12， 里面可能本来就有项目， 也可能本来就达到限制了
4. 对活着（程序额外标记的状态）的项目， 且没有绑定卡的项目， 绑定卡， 绑越多项目越好， 直到达到限制
5. 对绑卡的项目， 获取能访问大模型的api token， 将token，账号， project， 地区... 信息， 以及虚拟机信息打包作为1个信息，称为official-token 保存

## 项目失效
参数 失效的账号-和项目， 数据标记失效。 

## 账号管理db 表
这里也要个db表， 至少包含下面内容  
id, 账号邮箱， 项目， 绑卡状态（0/1）， 死活状态(1 活着， 2死亡)， 虚拟机信息 ，official-token， ctime ，utime



# 其他
service ，需要有独立的层级，可能同时有api 或者例行任务等 入口

